#include "NTCTable.h"



/*
*********************************************************************************************************
*
*********************************************************************************************************
*/




/*
NTSE1103

3435

-40'C~150'C
*/
const uint32_t NTCTab_3435[161] = 
{
	193160,
	182910,
	173260,
	164160,
	155590,
	147510,
	139890,
	132700,
	125920,
	119520,
	113480,
	107780,
	102400,
	97312,
	92507,
	87964,
	83670,
	79609,
	75767,
	72132,
	68691,
	65433,
	62348,
	59425,
	56656,
	54031,
	51542,
	49181,
	46942,
	44817,
	42800,
	40885,
	39066,
	37339,
	35697,
	34136,
	32652,
	31241,
	29899,
	28621,
	27405,
	26248,
	25145,
	24095,
	23095,
	22141,
	21232,
	20365,
	19538,
	18750,
	17997,
	17279,
	16593,
	15938,
	15312,
	14714,
	14143,
	13597,
	13075,
	12575,
	12098,
	11641,
	11203,
	10785,
	10384,
	10000,
	9632,
	9280,
	8943,
	8619,
	8309,
	8012,
	7727,
	7453,
	7191,
	6939,
	6697,
	6465,
	6242,
	6028,
	5822,
	5625,
	5435,
	5253,
	5077,
	4908,
	4746,
	4590,
	4440,
	4296,
	4157,
	4023,
	3894,
	3770,
	3650,
	3535,
	3424,
	3317,
	3214,
	3115,
	3019,
	2927,
	2838,
	2752,
	2669,
	2589,
	2511,
	2437,
	2365,
	2295,
	2228,
	2163,
	2101,
	2040,
	1981,
	1925,
	1870,
	1817,
	1766,
	1716,
	1669,
	1622,
	1577,
	1534,
	1492,
	1451,
	1412,
	1374,
	1337,
	1301,
	1266,
	1233,
	1200,
	1169,
	1138,
	1109,
	1080,
	1052,
	1025,
	998,
	973,
	948,
	924,
	901,
	879,
	857,
	836,
	815,
	795,
	776,
	757,
	739,
	721,
	704,
	687,
	671,
	656,
	640,
	626,
	611,
	598,

};






/*
*********************************************************************************************************
*
*********************************************************************************************************
*/
int16_t GetTemperatureFromNTCTable(uint32_t ohms,TEMP_Table_e temp)
{
	const uint32_t* table = NULL;
	uint16_t tablen = 0;
		
	switch(temp)
	{
		case TEMP_Table_3435:
			table = NTCTab_3435;
			tablen = countof(NTCTab_3435);
			break;
		default:
			return 0;
	}
	
	int16_t Temperature;//单位 0.1摄氏
	uint8_t i;

	if(ohms >= table[0])
	{
		Temperature = -400;			
	}
	else if(ohms <= table[tablen-1])
	{
		if(TEMP_Table_3435 == temp)
			Temperature = 1250;
		else
			Temperature = 1250;
	}
	else
	{
		for(i = 0;i < tablen;i++)
		{
			if(ohms > table[i])			//NTCTab[i-1]<resis<NTCTab[i]
			{
				break;
			}
		}

		Temperature = (-40 + i - 1) * 10 + (table[i-1]-ohms) * 10 / (table[i-1] - table[i]);
	}

	return Temperature;
}






